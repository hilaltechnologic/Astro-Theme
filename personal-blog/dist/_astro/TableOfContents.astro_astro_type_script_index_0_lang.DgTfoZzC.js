class o{constructor(){this.tocContainer=document.getElementById("toc-container"),this.tocNav=document.getElementById("toc-nav"),this.article=document.querySelector("article")||document.querySelector("main"),!(!this.tocContainer||!this.tocNav||!this.article)&&(this.headings=[],this.tocItems=[],this.init())}init(){this.extractHeadings(),this.generateTOC(),this.setupScrollSpy()}extractHeadings(){const e=this.article.querySelectorAll("h2, h3, h4");this.headings=Array.from(e).map((t,i)=>(t.id||(t.id=`heading-${i}`),{element:t,id:t.id,text:t.textContent,level:parseInt(t.tagName.charAt(1)),top:t.offsetTop}))}generateTOC(){if(this.headings.length===0){this.tocContainer.style.display="none";return}this.tocNav.innerHTML=this.headings.map(e=>{const t=(e.level-2)*16,i=e===this.headings[0]?"text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400";return`
          <a 
            href="#${e.id}" 
            class="block text-sm transition-colors ${i}"
            style="padding-left: ${t}px"
            data-heading-id="${e.id}"
          >
            ${e.text}
          </a>
        `}).join(""),this.tocNav.querySelectorAll("a").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=e.getAttribute("href").substring(1),r=document.getElementById(i);if(r){const s=r.offsetTop-80;window.scrollTo({top:s,behavior:"smooth"})}})})}setupScrollSpy(){let e=!1;const t=()=>{e||(requestAnimationFrame(()=>{this.updateActiveHeading(),e=!1}),e=!0)};window.addEventListener("scroll",t,{passive:!0}),this.updateActiveHeading()}updateActiveHeading(){const e=window.pageYOffset+100;let t=null;for(let i=this.headings.length-1;i>=0;i--){const r=this.headings[i];if(e>=r.top){t=r;break}}this.tocNav.querySelectorAll("a").forEach(i=>{const r=i.getAttribute("data-heading-id");t&&r===t.id?(i.classList.add("text-primary-600","dark:text-primary-400","font-medium"),i.classList.remove("text-gray-600","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400")):(i.classList.remove("text-primary-600","dark:text-primary-400","font-medium"),i.classList.add("text-gray-600","dark:text-gray-300","hover:text-primary-600","dark:hover:text-primary-400"))})}}document.addEventListener("DOMContentLoaded",()=>{new o});

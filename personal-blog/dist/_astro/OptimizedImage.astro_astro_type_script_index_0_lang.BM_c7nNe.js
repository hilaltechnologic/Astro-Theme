class o{constructor(){this.images=document.querySelectorAll('img[loading="lazy"]'),this.init()}init(){if("IntersectionObserver"in window){const e=new IntersectionObserver(s=>{s.forEach(a=>{a.isIntersecting&&(this.loadImage(a.target),e.unobserve(a.target))})},{rootMargin:"50px 0px",threshold:.01});this.images.forEach(s=>{e.observe(s)})}else this.loadAllImages()}loadImage(e){e.classList.add("loading");const s=new Image;s.onload=()=>{e.src=s.src,e.classList.remove("loading"),e.classList.add("loaded")},s.onerror=()=>{e.classList.remove("loading"),e.classList.add("error")},s.src=e.src}loadAllImages(){this.images.forEach(e=>{this.loadImage(e)})}}document.addEventListener("DOMContentLoaded",()=>{new o});

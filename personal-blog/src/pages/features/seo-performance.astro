---
import BaseLayout from '../../layouts/BaseLayout.astro';
import SEOHead from '../../components/SEOHead.astro';
import PerformanceMonitor from '../../components/PerformanceMonitor.astro';
import OptimizedImage from '../../components/OptimizedImage.astro';
import ServiceWorker from '../../components/ServiceWorker.astro';
import Analytics from '../../components/Analytics.astro';
import Accessibility from '../../components/Accessibility.astro';
---

<BaseLayout title="SEO & Performance Features" description="Advanced SEO optimization and performance monitoring features">
  <!-- SEO Head Component -->
  <SEOHead 
    title="SEO & Performance Features"
    description="Advanced SEO optimization and performance monitoring features for your blog"
    image="/og-seo-performance.jpg"
    type="article"
    author="Your Name"
    publishedTime="2024-01-01T00:00:00.000Z"
    tags={['seo', 'performance', 'accessibility', 'analytics']}
    section="Features"
    readingTime={5}
    wordCount={1500}
  />

  <!-- Performance Monitor -->
  <PerformanceMonitor />

  <!-- Accessibility Component -->
  <Accessibility />

  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-green-50 to-green-100 dark:from-gray-900 dark:to-gray-800 py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h1 class="text-4xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6">
          SEO & Performance
          <span class="text-green-600 dark:text-green-400">Features</span>
        </h1>
        <p class="text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-3xl mx-auto">
          Advanced SEO optimization, performance monitoring, and accessibility features 
          that ensure your blog ranks well and provides excellent user experience.
        </p>
      </div>
    </div>
  </section>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
      <!-- Main Content -->
      <div class="lg:col-span-2">
        <!-- SEO Features -->
        <section class="mb-16">
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
            üîç Advanced SEO Optimization
          </h2>
          <p class="text-gray-600 dark:text-gray-300 mb-6">
            Comprehensive SEO features that help your content rank better in search engines.
          </p>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">Meta Tags</h3>
              <p class="text-sm text-gray-600 dark:text-gray-300 mb-4">
                Automatic generation of comprehensive meta tags including Open Graph and Twitter Cards.
              </p>
              <ul class="text-xs text-gray-500 dark:text-gray-400 space-y-1">
                <li>‚Ä¢ Title and description optimization</li>
                <li>‚Ä¢ Open Graph tags for social sharing</li>
                <li>‚Ä¢ Twitter Card support</li>
                <li>‚Ä¢ Canonical URLs</li>
              </ul>
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">Structured Data</h3>
              <p class="text-sm text-gray-600 dark:text-gray-300 mb-4">
                JSON-LD structured data for better search engine understanding.
              </p>
              <ul class="text-xs text-gray-500 dark:text-gray-400 space-y-1">
                <li>‚Ä¢ Article schema markup</li>
                <li>‚Ä¢ Organization schema</li>
                <li>‚Ä¢ Breadcrumb navigation</li>
                <li>‚Ä¢ Rich snippets support</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- Performance Monitoring -->
        <section class="mb-16">
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
            üìä Performance Monitoring
          </h2>
          <p class="text-gray-600 dark:text-gray-300 mb-6">
            Real-time performance monitoring with Core Web Vitals tracking.
          </p>
          
          <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Core Web Vitals</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
              <div class="text-center">
                <div class="text-2xl font-bold text-green-600">LCP</div>
                <div class="text-sm text-gray-600 dark:text-gray-400">Largest Contentful Paint</div>
                <div id="lcp-value" class="text-lg font-semibold">-</div>
              </div>
              <div class="text-center">
                <div class="text-2xl font-bold text-blue-600">FID</div>
                <div class="text-sm text-gray-600 dark:text-gray-400">First Input Delay</div>
                <div id="fid-value" class="text-lg font-semibold">-</div>
              </div>
              <div class="text-center">
                <div class="text-2xl font-bold text-purple-600">CLS</div>
                <div class="text-sm text-gray-600 dark:text-gray-400">Cumulative Layout Shift</div>
                <div id="cls-value" class="text-lg font-semibold">-</div>
              </div>
            </div>
            
            <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
              <h4 class="font-semibold text-gray-900 dark:text-white mb-2">Performance Score</h4>
              <div class="flex items-center">
                <div class="flex-1 bg-gray-200 dark:bg-gray-600 rounded-full h-2 mr-4">
                  <div id="performance-bar" class="bg-green-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
                <span id="performance-score" class="text-sm font-semibold">-</span>
              </div>
            </div>
          </div>
        </section>

        <!-- Image Optimization -->
        <section class="mb-16">
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
            üñºÔ∏è Image Optimization
          </h2>
          <p class="text-gray-600 dark:text-gray-300 mb-6">
            Automatic image optimization with WebP support and lazy loading.
          </p>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">Optimized Image Example</h3>
              <OptimizedImage 
                src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=400&h=300&fit=crop"
                alt="Coding on laptop - optimized with WebP support"
                width={400}
                height={300}
                className="rounded-lg"
                aspectRatio="4:3"
              />
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">Optimization Features</h3>
              <ul class="text-sm text-gray-600 dark:text-gray-300 space-y-2">
                <li>‚Ä¢ WebP format with JPEG fallback</li>
                <li>‚Ä¢ Responsive images with srcset</li>
                <li>‚Ä¢ Lazy loading for better performance</li>
                <li>‚Ä¢ Automatic aspect ratio handling</li>
                <li>‚Ä¢ Loading skeleton animation</li>
                <li>‚Ä¢ Error handling and fallbacks</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- Service Worker -->
        <section class="mb-16">
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
            ‚ö° Service Worker & Caching
          </h2>
          <p class="text-gray-600 dark:text-gray-300 mb-6">
            Offline support and intelligent caching strategies for better performance.
          </p>
          
          <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Caching Strategy</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="text-center">
                <div class="text-2xl font-bold text-green-600 mb-2">Cache First</div>
                <div class="text-sm text-gray-600 dark:text-gray-400">
                  For static assets like images and fonts
                </div>
              </div>
              <div class="text-center">
                <div class="text-2xl font-bold text-blue-600 mb-2">Network First</div>
                <div class="text-sm text-gray-600 dark:text-gray-400">
                  For dynamic content like API responses
                </div>
              </div>
              <div class="text-center">
                <div class="text-2xl font-bold text-purple-600 mb-2">Stale While Revalidate</div>
                <div class="text-sm text-gray-600 dark:text-gray-400">
                  For content that updates frequently
                </div>
              </div>
            </div>
            
            <div class="mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
              <h4 class="font-semibold text-gray-900 dark:text-white mb-2">Offline Support</h4>
              <p class="text-sm text-gray-600 dark:text-gray-300">
                Your blog works offline! Content is cached intelligently and updates when you're back online.
              </p>
            </div>
          </div>
        </section>

        <!-- Analytics -->
        <section class="mb-16">
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
            üìà Analytics & Privacy
          </h2>
          <p class="text-gray-600 dark:text-gray-300 mb-6">
            Privacy-friendly analytics with GDPR compliance and user consent management.
          </p>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">Google Analytics 4</h3>
              <p class="text-sm text-gray-600 dark:text-gray-300 mb-4">
                Advanced analytics with enhanced ecommerce tracking and conversion optimization.
              </p>
              <ul class="text-xs text-gray-500 dark:text-gray-400 space-y-1">
                <li>‚Ä¢ Page view tracking</li>
                <li>‚Ä¢ Event tracking</li>
                <li>‚Ä¢ User engagement metrics</li>
                <li>‚Ä¢ Conversion tracking</li>
              </ul>
            </div>
            
            <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">Privacy Features</h3>
              <p class="text-sm text-gray-600 dark:text-gray-300 mb-4">
                GDPR-compliant analytics with user consent management.
              </p>
              <ul class="text-xs text-gray-500 dark:text-gray-400 space-y-1">
                <li>‚Ä¢ IP anonymization</li>
                <li>‚Ä¢ Consent management</li>
                <li>‚Ä¢ Data retention controls</li>
                <li>‚Ä¢ Opt-out mechanisms</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- Accessibility -->
        <section class="mb-16">
          <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
            ‚ôø Accessibility Features
          </h2>
          <p class="text-gray-600 dark:text-gray-300 mb-6">
            WCAG 2.1 AA compliant accessibility features for inclusive user experience.
          </p>
          
          <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Accessibility Features</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h4 class="font-semibold text-gray-900 dark:text-white mb-2">Keyboard Navigation</h4>
                <ul class="text-sm text-gray-600 dark:text-gray-300 space-y-1">
                  <li>‚Ä¢ Full keyboard navigation support</li>
                  <li>‚Ä¢ Focus management for modals</li>
                  <li>‚Ä¢ Skip to content links</li>
                  <li>‚Ä¢ Custom focus indicators</li>
                </ul>
              </div>
              
              <div>
                <h4 class="font-semibold text-gray-900 dark:text-white mb-2">Screen Reader Support</h4>
                <ul class="text-sm text-gray-600 dark:text-gray-300 space-y-1">
                  <li>‚Ä¢ ARIA labels and roles</li>
                  <li>‚Ä¢ Live regions for dynamic content</li>
                  <li>‚Ä¢ Semantic HTML structure</li>
                  <li>‚Ä¢ Alt text for images</li>
                </ul>
              </div>
            </div>
            
            <div class="mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
              <h4 class="font-semibold text-gray-900 dark:text-white mb-2">Visual Accessibility</h4>
              <ul class="text-sm text-gray-600 dark:text-gray-300 space-y-1">
                <li>‚Ä¢ High contrast mode support</li>
                <li>‚Ä¢ Reduced motion preferences</li>
                <li>‚Ä¢ Scalable text and UI elements</li>
                <li>‚Ä¢ Color-blind friendly design</li>
              </ul>
            </div>
          </div>
        </section>
      </div>

      <!-- Sidebar -->
      <div class="lg:col-span-1">
        <div class="sticky top-8 space-y-6">
          <!-- Performance Score -->
          <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
              Performance Score
            </h3>
            <div class="text-center">
              <div class="text-4xl font-bold text-green-600 mb-2" id="sidebar-score">-</div>
              <div class="text-sm text-gray-600 dark:text-gray-400">Overall Performance</div>
            </div>
          </div>

          <!-- SEO Checklist -->
          <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
              SEO Checklist
            </h3>
            <ul class="space-y-3">
              <li class="flex items-center text-sm">
                <svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                Meta tags optimized
              </li>
              <li class="flex items-center text-sm">
                <svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                Structured data
              </li>
              <li class="flex items-center text-sm">
                <svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                Core Web Vitals
              </li>
              <li class="flex items-center text-sm">
                <svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                Image optimization
              </li>
              <li class="flex items-center text-sm">
                <svg class="w-4 h-4 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                </svg>
                Accessibility
              </li>
            </ul>
          </div>

          <!-- Quick Actions -->
          <div class="bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
              Quick Actions
            </h3>
            <div class="space-y-2">
              <button 
                onclick="testPerformance()"
                class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm transition-colors"
              >
                Test Performance
              </button>
              <button 
                onclick="testAccessibility()"
                class="w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm transition-colors"
              >
                Test Accessibility
              </button>
              <button 
                onclick="viewAnalytics()"
                class="w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded text-sm transition-colors"
              >
                View Analytics
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Service Worker -->
  <ServiceWorker />
  
  <!-- Analytics -->
  <Analytics gaId="G-XXXXXXXXXX" gtmId="GTM-XXXXXXXX" privacyMode={true} />
</BaseLayout>

<script>
  // Update performance metrics
  function updatePerformanceMetrics() {
    if (window.getPerformanceMetrics) {
      const metrics = window.getPerformanceMetrics();
      const score = window.getPerformanceScore();
      
      // Update main content
      document.getElementById('lcp-value').textContent = metrics.lcp ? `${Math.round(metrics.lcp)}ms` : '-';
      document.getElementById('fid-value').textContent = metrics.fid ? `${Math.round(metrics.fid)}ms` : '-';
      document.getElementById('cls-value').textContent = metrics.cls ? metrics.cls.toFixed(3) : '-';
      
      // Update performance bar
      const performanceBar = document.getElementById('performance-bar');
      const performanceScore = document.getElementById('performance-score');
      const sidebarScore = document.getElementById('sidebar-score');
      
      if (score.average) {
        const percentage = Math.round(score.average * 100);
        performanceBar.style.width = `${percentage}%`;
        performanceScore.textContent = `${percentage}%`;
        sidebarScore.textContent = `${percentage}%`;
        
        // Update color based on score
        if (percentage >= 90) {
          performanceBar.className = 'bg-green-500 h-2 rounded-full transition-all duration-300';
        } else if (percentage >= 70) {
          performanceBar.className = 'bg-yellow-500 h-2 rounded-full transition-all duration-300';
        } else {
          performanceBar.className = 'bg-red-500 h-2 rounded-full transition-all duration-300';
        }
      }
    }
  }
  
  // Test functions
  window.testPerformance = function() {
    if (window.getPerformanceMetrics) {
      const metrics = window.getPerformanceMetrics();
      console.log('Performance Metrics:', metrics);
      alert('Performance test completed. Check console for details.');
    }
  };
  
  window.testAccessibility = function() {
    if (window.testAccessibility) {
      window.testAccessibility();
    }
  };
  
  window.viewAnalytics = function() {
    if (window.analytics) {
      const events = window.analytics.getEvents();
      console.log('Analytics Events:', events);
      alert('Analytics data logged to console.');
    }
  };
  
  // Update metrics every second
  setInterval(updatePerformanceMetrics, 1000);
  
  // Initial update
  setTimeout(updatePerformanceMetrics, 1000);
</script> 
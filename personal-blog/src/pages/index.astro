---
import { getLanguageFromStorage, getBrowserLanguage, defaultLanguage } from '../i18n/config';

// Get preferred language
let preferredLanguage = getLanguageFromStorage();

// If no stored preference, use browser language
if (preferredLanguage === defaultLanguage) {
  preferredLanguage = getBrowserLanguage();
}

// Redirect to the appropriate language route
const redirectUrl = preferredLanguage === defaultLanguage ? '/en' : `/${preferredLanguage}`;
return Astro.redirect(redirectUrl);
--- 
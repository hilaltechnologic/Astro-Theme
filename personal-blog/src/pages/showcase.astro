---
import BaseLayout from '../layouts/BaseLayout.astro';
import SEOHead from '../components/SEOHead.astro';
import PerformanceMonitor from '../components/PerformanceMonitor.astro';
import OptimizedImage from '../components/OptimizedImage.astro';
import SearchBar from '../components/SearchBar.astro';
import ReadingProgress from '../components/ReadingProgress.astro';
import TableOfContents from '../components/TableOfContents.astro';
import CodeHighlight from '../components/CodeHighlight.astro';
import ImageGallery from '../components/ImageGallery.astro';
import VideoEmbed from '../components/VideoEmbed.astro';
import ServiceWorker from '../components/ServiceWorker.astro';
import Analytics from '../components/Analytics.astro';
import Accessibility from '../components/Accessibility.astro';

// Feature showcase data
const allFeatures = [
  {
    category: "🚀 Core Features",
    color: "blue",
    features: [
      { name: "Responsive Design", icon: "📱", description: "Mobile-first, all screen sizes", demo: true },
      { name: "Dark Mode", icon: "🌙", description: "Toggle dark/light mode", demo: true },
      { name: "SEO Optimization", icon: "🔍", description: "Meta tags, sitemap, RSS", demo: true },
      { name: "Content Collections", icon: "📚", description: "Type-safe content management", demo: false },
      { name: "MDX Support", icon: "✍️", description: "Enhanced markdown with components", demo: true },
      { name: "Tailwind CSS", icon: "🎨", description: "Utility-first styling", demo: false }
    ]
  },
  {
    category: "🎨 Layout Options",
    color: "green",
    features: [
      { name: "Classic Layout", icon: "📰", description: "Traditional blog style", demo: true },
      { name: "Magazine Layout", icon: "📖", description: "Grid-based magazine style", demo: true },
      { name: "Portfolio Layout", icon: "💼", description: "Project showcase style", demo: true },
      { name: "Minimalist Layout", icon: "✨", description: "Clean, minimal design", demo: true }
    ]
  },
  {
    category: "📝 Advanced Content",
    color: "purple",
    features: [
      { name: "Search Functionality", icon: "🔎", description: "Full-text search", demo: true },
      { name: "Reading Progress", icon: "📊", description: "Visual progress indicator", demo: true },
      { name: "Table of Contents", icon: "📑", description: "Auto-generated TOC", demo: true },
      { name: "Code Highlighting", icon: "💻", description: "Syntax highlighting + copy", demo: true },
      { name: "Image Gallery", icon: "🖼️", description: "Masonry layout + lightbox", demo: true },
      { name: "Video Embeds", icon: "🎥", description: "YouTube, Vimeo, custom videos", demo: true }
    ]
  },
  {
    category: "🎯 SEO & Performance",
    color: "orange",
    features: [
      { name: "Advanced SEO", icon: "🎯", description: "Comprehensive meta tags", demo: true },
      { name: "Performance Monitoring", icon: "📈", description: "Core Web Vitals tracking", demo: true },
      { name: "Image Optimization", icon: "🖼️", description: "WebP support + lazy loading", demo: true },
      { name: "Service Worker", icon: "⚡", description: "Offline support + caching", demo: true },
      { name: "Analytics", icon: "📊", description: "Google Analytics + privacy", demo: true },
      { name: "Accessibility", icon: "♿", description: "WCAG 2.1 AA compliance", demo: true }
    ]
  }
];

const colorClasses = {
  blue: "from-blue-500 to-blue-600",
  green: "from-green-500 to-green-600", 
  purple: "from-purple-500 to-purple-600",
  orange: "from-orange-500 to-orange-600"
};

const codeExample = `// Interactive MDX Component
import { useState } from 'react';

export default function FeatureDemo() {
  const [isActive, setIsActive] = useState(false);
  
  return (
    <div className="p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg">
      <h3 className="text-xl font-bold mb-4">
        Interactive Feature Demo
      </h3>
      <button 
        onClick={() => setIsActive(!isActive)}
        className="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300 hover:scale-105"
      >
        {isActive ? 'Deactivate' : 'Activate'} Feature
      </button>
      {isActive && (
        <div className="mt-4 p-4 bg-white rounded-lg border border-blue-200">
          <p className="text-green-600 font-semibold">
            ✅ Feature is now active!
          </p>
        </div>
      )}
    </div>
  );
}`;

const galleryImages = [
  {
    src: "https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=400&h=300&fit=crop",
    alt: "Modern development workspace",
    caption: "Clean coding environment"
  },
  {
    src: "https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=300&fit=crop", 
    alt: "Creative design process",
    caption: "Design workflow"
  },
  {
    src: "https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=400&h=300&fit=crop",
    alt: "Code on screen",
    caption: "Clean code structure"
  },
  {
    src: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=300&fit=crop",
    alt: "Team collaboration",
    caption: "Team development"
  }
];
---

<BaseLayout title="Feature Showcase" description="Comprehensive showcase of all 58 features in the Astro Personal Blog Theme">
  <!-- SEO Head -->
  <SEOHead 
    title="Feature Showcase"
    description="Comprehensive showcase of all 58 features in the Astro Personal Blog Theme"
    image="/showcase-og.jpg"
    type="website"
    tags={['showcase', 'features', 'astro', 'blog', 'theme']}
  />

  <!-- Performance Monitor -->
  <PerformanceMonitor />

  <!-- Accessibility -->
  <Accessibility />

  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h1 class="text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6">
          Feature
          <span class="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent">
            Showcase
          </span>
        </h1>
        <p class="text-xl text-gray-600 dark:text-gray-300 mb-8 max-w-4xl mx-auto">
          Experience every feature in action. This showcase demonstrates the power and versatility 
          of the most comprehensive Astro blog theme available.
        </p>
        
        <!-- Feature Counter -->
        <div class="inline-flex items-center bg-white dark:bg-gray-800 rounded-full px-6 py-3 shadow-lg">
          <span class="text-2xl font-bold text-indigo-600 mr-2">58</span>
          <span class="text-gray-600 dark:text-gray-400">Features Available</span>
        </div>
      </div>
    </div>
  </section>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    <!-- Feature Categories -->
    <div class="space-y-16">
      {allFeatures.map((category, categoryIndex) => (
        <section class="relative">
          <!-- Category Header -->
          <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">
              {category.category}
            </h2>
            <div class={`w-24 h-1 bg-gradient-to-r ${colorClasses[category.color]} mx-auto rounded-full`}></div>
          </div>

          <!-- Features Grid -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {category.features.map((feature, featureIndex) => (
              <div class="group relative">
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300 hover:-translate-y-2">
                  <div class="flex items-center mb-4">
                    <span class="text-3xl mr-3">{feature.icon}</span>
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                      {feature.name}
                    </h3>
                  </div>
                  <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">
                    {feature.description}
                  </p>
                  
                  {feature.demo && (
                    <div class="mt-4">
                      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                        Live Demo
                      </span>
                    </div>
                  )}
                </div>
                
                {/* Hover Effect */}
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"></div>
              </div>
            ))}
          </div>

          {/* Interactive Demo Section */}
          {categoryIndex === 2 && (
            <div class="mt-16 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-700 rounded-2xl p-8">
              <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center">
                🎮 Interactive Content Features Demo
              </h3>
              
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Search Demo -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700">
                  <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
                    🔎 Search Functionality
                  </h4>
                  <SearchBar />
                </div>

                <!-- Code Highlighting Demo -->
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700">
                  <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
                    💻 Code Syntax Highlighting
                  </h4>
                  <CodeHighlight code={codeExample} language="javascript" />
                </div>
              </div>
            </div>
          )}

          {/* SEO & Performance Demo */}
          {categoryIndex === 3 && (
            <div class="mt-16 bg-gradient-to-r from-orange-50 to-red-50 dark:from-gray-800 dark:to-gray-700 rounded-2xl p-8">
              <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center">
                📊 Live Performance Monitoring
              </h3>
              
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 text-center">
                  <div class="text-3xl font-bold text-green-600 mb-2" id="lcp-showcase">-</div>
                  <div class="text-sm text-gray-600 dark:text-gray-400">Largest Contentful Paint</div>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 text-center">
                  <div class="text-3xl font-bold text-blue-600 mb-2" id="fid-showcase">-</div>
                  <div class="text-sm text-gray-600 dark:text-gray-400">First Input Delay</div>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 text-center">
                  <div class="text-3xl font-bold text-purple-600 mb-2" id="cls-showcase">-</div>
                  <div class="text-sm text-gray-600 dark:text-gray-400">Cumulative Layout Shift</div>
                </div>
              </div>
            </div>
          )}
        </section>
      ))}
    </div>

    <!-- Interactive Features Section -->
    <section class="mt-20 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-800 dark:to-gray-700 rounded-2xl p-8">
      <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-8 text-center">
        🎮 Interactive Features Demo
      </h2>
      
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Image Gallery Demo -->
        <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
            🖼️ Image Gallery with Lightbox
          </h3>
          <ImageGallery images={galleryImages} />
        </div>

        <!-- Video Embed Demo -->
        <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
            🎥 Video Embed with Lazy Loading
          </h3>
          <VideoEmbed 
            url="https://www.youtube.com/watch?v=dQw4w9WgXcQ"
            title="Feature Demo Video"
            aspectRatio="16:9"
          />
        </div>
      </div>
    </section>

    <!-- Optimized Image Demo -->
    <section class="mt-16 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-800 dark:to-gray-700 rounded-2xl p-8">
      <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-8 text-center">
        🖼️ Image Optimization Demo
      </h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
            WebP Support with Fallback
          </h3>
          <p class="text-gray-600 dark:text-gray-300 mb-4">
            This image is automatically optimized with WebP format and includes JPEG fallback for older browsers.
          </p>
          <OptimizedImage 
            src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=800&h=400&fit=crop"
            alt="Optimized image with WebP support"
            width={800}
            height={400}
            className="rounded-lg"
            aspectRatio="2:1"
          />
        </div>
        
        <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">
            Optimization Features
          </h3>
          <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-300">
            <li class="flex items-center">
              <span class="text-green-500 mr-2">✓</span>
              WebP format with JPEG fallback
            </li>
            <li class="flex items-center">
              <span class="text-green-500 mr-2">✓</span>
              Responsive images with srcset
            </li>
            <li class="flex items-center">
              <span class="text-green-500 mr-2">✓</span>
              Lazy loading for performance
            </li>
            <li class="flex items-center">
              <span class="text-green-500 mr-2">✓</span>
              Loading skeleton animation
            </li>
            <li class="flex items-center">
              <span class="text-green-500 mr-2">✓</span>
              Error handling and fallbacks
            </li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Table of Contents Demo -->
    <section class="mt-16 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-800 dark:to-gray-700 rounded-2xl p-8">
      <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-8 text-center">
        📑 Auto-generated Table of Contents
      </h2>
      
      <div class="bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700">
        <TableOfContents />
      </div>
    </section>
  </div>

  <!-- Call to Action -->
  <section class="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-4xl md:text-5xl font-bold text-white mb-6">
        Ready to Experience the Full Power?
      </h2>
      <p class="text-xl text-indigo-100 mb-8 max-w-3xl mx-auto">
        This showcase demonstrates just a glimpse of what's possible. 
        Explore the complete demo to see all 58 features in action.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a 
          href="/demo" 
          class="bg-white text-indigo-600 hover:bg-gray-100 px-8 py-4 rounded-lg font-semibold transition-colors text-lg"
        >
          View Complete Demo
        </a>
        <a 
          href="/features/advanced-content" 
          class="border-2 border-white text-white hover:bg-white hover:text-indigo-600 px-8 py-4 rounded-lg font-semibold transition-colors text-lg"
        >
          Content Features
        </a>
        <a 
          href="/features/seo-performance" 
          class="border-2 border-white text-white hover:bg-white hover:text-indigo-600 px-8 py-4 rounded-lg font-semibold transition-colors text-lg"
        >
          SEO & Performance
        </a>
      </div>
    </div>
  </section>

  <!-- Service Worker -->
  <ServiceWorker />
  
  <!-- Analytics -->
  <Analytics gaId="G-XXXXXXXXXX" gtmId="GTM-XXXXXXXX" privacyMode={true} />
</BaseLayout>

<script>
  // Update performance metrics for showcase
  function updateShowcaseMetrics() {
    if (window.getPerformanceMetrics) {
      const metrics = window.getPerformanceMetrics();
      
      // Update showcase metrics
      document.getElementById('lcp-showcase').textContent = metrics.lcp ? `${Math.round(metrics.lcp)}ms` : '-';
      document.getElementById('fid-showcase').textContent = metrics.fid ? `${Math.round(metrics.fid)}ms` : '-';
      document.getElementById('cls-showcase').textContent = metrics.cls ? metrics.cls.toFixed(3) : '-';
    }
  }
  
  // Update metrics every second
  setInterval(updateShowcaseMetrics, 1000);
  
  // Initial update
  setTimeout(updateShowcaseMetrics, 1000);
  
  // Add smooth scrolling for better UX
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
</script> 